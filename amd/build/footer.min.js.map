{"version":3,"sources":["../src/footer.js"],"names":["define","$","Repository","Templates","SELECTORS","FOOTER_CONTENT","TEMPLATES","FOOTER_CONTENT_CONTACT","setContextFooterContent","root","contextid","attr","appraisal","getFooterContent","then","result","content","find","render","contacts","html","init"],"mappings":"AAuBAA,OAAM,0BACN,CACI,QADJ,CAEI,4BAFJ,CAGI,gBAHJ,CADM,CAMN,SACIC,CADJ,CAEIC,CAFJ,CAGIC,CAHJ,CAIE,IAEMC,CAAAA,CAAS,CAAG,CACZC,cAAc,CAAE,wCADJ,CAFlB,CAMMC,CAAS,CAAG,CACZC,sBAAsB,CAAE,wCADZ,CANlB,CAeMC,CAAuB,CAAG,SAASC,CAAT,CAAe,IACrCC,CAAAA,CAAS,CAAGD,CAAI,CAACE,IAAL,CAAU,gBAAV,CADyB,CAErCC,CAAS,CAAGH,CAAI,CAACE,IAAL,CAAU,gBAAV,CAFyB,CAGzC,GAAiB,CAAb,EAAAD,CAAJ,CAAoB,CAChBR,CAAU,CAACW,gBAAX,CAA4B,CACxBH,SAAS,CAAEA,CADa,CAExBE,SAAS,CAAEA,CAFa,CAA5B,EAGGE,IAHH,CAGQ,SAASC,CAAT,CAAiB,CACrB,GAAIC,CAAAA,CAAO,CAAGP,CAAI,CAACQ,IAAL,CAAUb,CAAS,CAACC,cAApB,CAAd,CAEAF,CAAS,CAACe,MAAV,CAAiBZ,CAAS,CAACC,sBAA3B,CAAmD,CAACY,QAAQ,CAAEJ,CAAM,CAACI,QAAlB,CAA4BH,OAAO,CAAED,CAAM,CAACC,OAA5C,CAAnD,EACKF,IADL,CACU,SAASM,CAAT,CAAe,CACjBJ,CAAO,CAACI,IAAR,CAAaA,CAAb,CACH,CAHL,CAIH,CAVD,CAWH,CACJ,CA/BH,CA+CE,MAAO,CACHC,IAAI,CAVG,QAAPA,CAAAA,IAAO,CAASZ,CAAT,CAAe,CACtBA,CAAI,CAAGR,CAAC,CAACQ,CAAD,CAAR,CAEA,GAAI,CAACA,CAAI,CAACE,IAAL,CAAU,kBAAV,CAAL,CAAoC,CAChCH,CAAuB,CAACC,CAAD,CAAvB,CACAA,CAAI,CAACE,IAAL,CAAU,kBAAV,IACH,CACJ,CAEM,CAGV,CA5DK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Arup Search\n *\n * @package    theme_nova\n * @copyright  2019 Bas Brands <bas@sonsbeekmedia.nl>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(\n[\n    'jquery',\n    'theme_arupboost/repository',\n    'core/templates',\n],\nfunction(\n    $,\n    Repository,\n    Templates\n) {\n\n    var SELECTORS = {\n        FOOTER_CONTENT: '[data-region=\"customfooter-content\"]'\n    };\n\n    var TEMPLATES = {\n        FOOTER_CONTENT_CONTACT: 'theme_arupboost/footer_content_contact'\n    };\n\n    /**\n     * Listen to, and handle events for the arupboost theme\n     *\n     * @param {Object} root The event nodes container element.\n     */\n    var setContextFooterContent = function(root) {\n        var contextid = root.attr('data-contextid');\n        var appraisal = root.attr('data-appraisal');\n        if (contextid >= 1) {\n            Repository.getFooterContent({\n                contextid: contextid,\n                appraisal: appraisal\n            }).then(function(result) {\n                var content = root.find(SELECTORS.FOOTER_CONTENT);\n\n                Templates.render(TEMPLATES.FOOTER_CONTENT_CONTACT, {contacts: result.contacts, content: result.content})\n                    .then(function(html) {\n                        content.html(html);\n                    });\n            });\n        }\n    };\n\n    /**\n     * Intialise the footer.\n     *\n     * @param {object} root The root element containing the timezone modal.\n     */\n    var init = function(root) {\n        root = $(root);\n\n        if (!root.attr('data-init-footer')) {\n            setContextFooterContent(root);\n            root.attr('data-init-footer', true);\n        }\n    };\n\n    return {\n        init: init\n    };\n});"],"file":"footer.min.js"}