define ("theme_nova/bookmark",["jquery","block_myoverview/repository","core/custom_interaction_events","core/notification","core/ajax","core/toast","core/str"],function(a,b,c,d,e,f,g){var h={ACTION_ADD_BOOKMARK:"[data-action=\"add-bookmark\"]",ACTION_REMOVE_BOOKMARK:"[data-action=\"remove-bookmark\"]"},i=function(a){var b=e.call([{methodname:"core_course_set_favourite_courses",args:a}])[0];return b},j=function(a,b,c){var e="bookmarkadded";if(!c){e="bookmarkremoved"}return i({courses:[{id:b,favourite:c}]}).then(function(b){if(0==b.warnings.length){g.get_string(e,"theme_arupboost").then(function(a){f.add(a)});k(a,c)}else{d.alert("Bookmarking course failed","Could not change bookmark state")}}).catch(d.exception)},k=function(a,b){if(b){a.find(h.ACTION_REMOVE_BOOKMARK).removeClass("d-none");a.find(h.ACTION_ADD_BOOKMARK).addClass("d-none")}else{a.find(h.ACTION_REMOVE_BOOKMARK).addClass("d-none");a.find(h.ACTION_ADD_BOOKMARK).removeClass("d-none")}};return{init:function init(b){b=a(b);var d=b.attr("data-course-id");b.on(c.events.activate,h.ACTION_ADD_BOOKMARK,function(a,c){j(b,d,!0);c.originalEvent.preventDefault()});b.on(c.events.activate,h.ACTION_REMOVE_BOOKMARK,function(a,c){j(b,d,!1);c.originalEvent.preventDefault()})}}});
//# sourceMappingURL=bookmark.min.js.map
