{"version":3,"sources":["../src/backtocourse.js"],"names":["define","$","init","sectionnum","useanchor","sectionifycourselinks","find","each","i","link","href","match","sectionifyforms","length","append","action","attr"],"mappings":"AAsBAA,OAAM,gCAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAE3B,MAAO,CACHC,IAAI,CAAE,cAASC,CAAT,CAAqBC,CAArB,CAAgC,CA0BlC,CAzB4B,QAAxBC,CAAAA,qBAAwB,CAASF,CAAT,CAAqB,CAC7CF,CAAC,CAAC,4DAAD,CAAD,CACKK,IADL,CACU,wBADV,EAEKC,IAFL,CAEU,SAASC,CAAT,CAAYC,CAAZ,CAAkB,CAEpB,GAAI,CAACA,CAAI,CAACC,IAAL,CAAUC,KAAV,CAAgB,GAAhB,CAAL,CAA2B,CACvB,GAAIP,CAAJ,CAAe,CACXK,CAAI,CAACC,IAAL,EAAa,YAAcP,CAC9B,CAFD,IAEO,IAAI,CAACM,CAAI,CAACC,IAAL,CAAUC,KAAV,CAAgB,SAAhB,CAAL,CAAiC,CACpCF,CAAI,CAACC,IAAL,EAAa,YAAcP,CAC9B,CACJ,CACR,CAXD,CAYH,CAYD,EAAsBA,CAAtB,EACA,CAZsB,QAAlBS,CAAAA,eAAkB,CAAST,CAAT,CAAqB,CACvCF,CAAC,CAAC,6BAAD,CAAD,CAAiCM,IAAjC,CAAsC,UAAW,CAC7C,GAAI,CAACH,CAAD,EAA+D,CAAjD,GAAAH,CAAC,CAAC,IAAD,CAAD,CAAQK,IAAR,CAAa,uBAAb,EAAsCO,MAAxD,CAAsE,CAClEZ,CAAC,CAAC,IAAD,CAAD,CAAQa,MAAR,CAAe,mDAAgDX,CAAhD,CAA6D,OAA5E,CACH,CAFD,IAEO,IAAIC,CAAJ,CAAe,CAClB,GAAIW,CAAAA,CAAM,CAAGd,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,QAAb,CAAb,CACAf,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,QAAb,CAAuBD,CAAM,CAAG,WAAT,CAAuBZ,CAA9C,CACH,CACJ,CAPD,CAQH,CAGD,EAAgBA,CAAhB,CACH,CA7BE,CA+BV,CAjCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Add section details to course links.\n *\n * @package    theme_nova\n * @copyright  2020 Simon Lewis (simon.lewis@motorpilot.com)\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery'], function($) {\n\n    return {\n        init: function(sectionnum, useanchor) {\n            var sectionifycourselinks = function(sectionnum) {\n                $('#page-navbar .breadcrumb, #page-content div[role=\"main\"]')\n                    .find(\"a[href*='course/view']\")\n                    .each(function(i, link) {\n                        // Can't do this easily if anchor exists.\n                        if (!link.href.match('#')) {\n                            if (useanchor) {\n                                link.href += '#section-' + sectionnum;\n                            } else if (!link.href.match('section')) {\n                                link.href += '&section=' + sectionnum;\n                            }\n                        }\n                });\n            };\n            var sectionifyforms = function(sectionnum) {\n                $(\"form[action*='course/view']\").each(function() {\n                    if (!useanchor && $(this).find(\"input[name='section']\").length === 0) {\n                        $(this).append('<input type=\"hidden\" name=\"section\" value=\"' + sectionnum + '\" />');\n                    } else if (useanchor) {\n                        var action = $(this).attr('action');\n                        $(this).attr('action', action + '#section-' + sectionnum);\n                    }\n                });\n            };\n\n            sectionifycourselinks(sectionnum);\n            sectionifyforms(sectionnum);\n        }\n    };\n});"],"file":"backtocourse.min.js"}